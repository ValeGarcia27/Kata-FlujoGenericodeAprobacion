(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[766],{221:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>o});var r=a(5155),i=a(2115),t=a(3464);function n(){let[e,s]=(0,i.useState)([]),[a,n]=(0,i.useState)({}),[l,c]=(0,i.useState)(!1);(0,i.useEffect)(()=>{o()},[]);let o=async()=>{try{let e=await t.A.get("/api/solicitudes");s(e.data.solicitudes||[])}catch(e){console.error("❌ Error al obtener solicitudes:",e)}},d=async(e,s)=>{if(!l){c(!0);try{let r=a[e]||"";await t.A.patch("/api/solicitudes",{uuid:e,estado:s,comentario:r,usuario:"responsable_demo"}),n(s=>({...s,[e]:""})),await o()}catch(e){console.error("❌ Error al actualizar solicitud:",e)}finally{c(!1)}}},u=e.filter(e=>"pendiente"===e.estado);return(0,r.jsx)("div",{className:"bandeja-container",children:u.length>0?u.map(e=>(0,r.jsxs)("div",{className:"solicitud-card",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"T\xedtulo:"})," ",e.titulo]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Descripci\xf3n:"})," ",e.descripcion]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Responsable:"})," ",e.responsable]}),(0,r.jsx)("textarea",{placeholder:"Escribe un comentario...",value:a[e.uuid]||"",onChange:s=>{var a,r;return a=e.uuid,r=s.target.value,void n(e=>({...e,[a]:r}))},disabled:l}),(0,r.jsxs)("div",{className:"acciones",children:[(0,r.jsx)("button",{onClick:()=>d(e.uuid,"aprobado"),className:"btn-aprobar",disabled:l,children:"Aprobar"}),(0,r.jsx)("button",{onClick:()=>d(e.uuid,"rechazado"),className:"btn-rechazar",disabled:l,children:"Rechazar"})]})]},e.uuid)):(0,r.jsx)("p",{children:"No hay solicitudes pendientes."})})}a(776);var l=a(6874),c=a.n(l);function o(){return(0,i.useEffect)(()=>{"aprobador"!==localStorage.getItem("rol")&&router.push("/login")},[]),(0,r.jsxs)("main",{style:{padding:"2rem"},children:[(0,r.jsx)("h1",{className:"titulo-pendientes",children:"Bandeja de Pendientes"}),(0,r.jsx)(n,{}),(0,r.jsx)("div",{style:{marginTop:"2rem"},children:(0,r.jsx)(c(),{href:"/aprobador",children:(0,r.jsx)("button",{className:"boton-volver",children:(0,r.jsx)("img",{src:"https://png.pngtree.com/png-clipart/20190705/original/pngtree-arrow-left-vector-icon-png-image_4279219.jpg",alt:"Volver"})})})})]})}},776:()=>{},7353:(e,s,a)=>{Promise.resolve().then(a.bind(a,221))}},e=>{e.O(0,[513,464,874,441,964,358],()=>e(e.s=7353)),_N_E=e.O()}]);